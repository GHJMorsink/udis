   .org     $C000

TokenTable:
   .string  '<=>'
   .byte    $FE
   .string  '-+'
   .byte    $C8
   .string  '#(!?RTLCAPEGBF'
   .byte    $F0
   .string  'T\xffO'
   .byte    $CB
   .string  'S\xcbTEP'
   .byte    $CB
   .string  'T\xc3HEN'
   .byte    $C3
   .string  '"$'
   .byte    $CE
   .byte    $CE
   .byte    $CC
   .string  '$,'
   .byte    $C5
   .string  '$&;\x0d,'
   .byte    $C3
   .byte    $C5
   .byte    $C2
   .byte    $3E
   .byte    $C7
   .byte    $3D
   .byte    $C7
   .byte    $C7
   .byte    $C7
   .byte    $3D
   .byte    $C7
   .byte    $C7
   .byte    $C8
   .byte    $52
   .byte    $C7
   .byte    $C7
   .string  'OA'
   .byte    $FE
   .string  '$'
   .byte    $C7
   .string  'H'
   .byte    $C9
   .string  'EN'
   .byte    $C9
   .string  'ND'
   .byte    $C7
   .byte    $C9
   .byte    $C9
   .byte    $C9
   .byte    $C9
   .string  'ND'
   .byte    $C9
   .string  'OP'
   .byte    $C9
   .string  'OUNT'
   .byte    $C9
   .string  'BS'
   .byte    $C9
   .string  'TR'
   .byte    $CF
   .string  'XT'
   .byte    $CF
   .string  'ET'
   .byte    $CF
   .string  'GET'
   .byte    $CF
   .string  'IN'
   .byte    $CF
   .string  'OUT'
   .byte    $CF
   .byte    $C3
   .byte    $C3
   .string  'RINT'
   .byte    $C3
   .string  'NLUNIGRF!?$PDLSB*E'
   .byte    $F0
   .string  'AVE'
   .byte    $CF
   .string  'EW'
   .byte    $C2
   .string  'O'
   .byte    $CC
   .string  'ET'
   .byte    $C3
   .string  'INK'
   .byte    $C3
   .string  'IST'
   .byte    $CA
   .string  'OAD'
   .byte    $CE
   .string  'NTIL'
   .byte    $CC
   .string  'EXT'
   .byte    $CA
   .string  'F'
   .byte    $C5
   .string  'NPUT'
   .byte    $CC
   .string  'OSUB'
   .byte    $CB
   .string  'OTO'
   .byte    $CC
   .string  'ETURN'
   .byte    $CB
   .string  'EM'
   .byte    $C5
   .string  'UN'
   .byte    $F1
   .string  'OR'
   .byte    $CB
   .string  'ND'
   .byte    $CD
   .string  'GET'
   .byte    $CF
   .string  'PUT'
   .byte    $CF
   .string  'HUT'
   .byte    $CF
   .string  'PUT'
   .byte    $CF
   .string  'TR'
   .byte    $CF
   .string  'UT'
   .byte    $CF
   .byte    $C3
   .byte    $C4
   .byte    $CD
   .byte    $C4
   .byte    $2C
   .byte    $FE
TableX:
   .byte    $36
   .byte    $3B
   .byte    $3C
   .byte    $C0
   .byte    $3F
   .byte    $06
   .byte    $DC
   .byte    $50
   .byte    $51
   .byte    $52
   .byte    $53
   .byte    $54
   .byte    $57
   .byte    $4A
   .byte    $5A
   .byte    $5F
   .byte    $62
   .byte    $65
   .byte    $68
   .byte    $6B
   .byte    $6F
   .byte    $2E
   .byte    $18
   .byte    $AC
   .byte    $17
   .byte    $81
   .byte    $1C
   .byte    $BE
   .byte    $17
   .byte    $17
   .byte    $17
   .byte    $A2
   .byte    $22
   .byte    $1B
   .byte    $17
   .byte    $17
   .byte    $17
   .byte    $1B
   .byte    $29
   .byte    $28
   .byte    $B6
   .byte    $BF
   .byte    $B6
   .byte    $2A
   .byte    $B7
   .byte    $58
   .byte    $76
   .byte    $77
   .byte    $34
   .byte    $34
   .byte    $7C
   .byte    $3F
   .byte    $4A
   .byte    $78
   .byte    $38
   .byte    $6D
   .byte    $3A
   .byte    $64
   .byte    $74
   .byte    $5B
   .byte    $3E
   .byte    $7B
   .byte    $82
   .byte    $C1
   .byte    $45
   .byte    $22
   .byte    $31
   .byte    $40
   .byte    $4D
   .byte    $4D
   .byte    $42
   .byte    $53
   .byte    $15
   .byte    $D2
   .byte    $15
   .byte    $15
   .byte    $BD
   .byte    $45
   .byte    $45
   .byte    $14
   .byte    $0A
   .byte    $44
   .byte    $5F
   .byte    $4C
   .byte    $15
   .byte    $15
   .byte    $86
   .byte    $15
   .byte    $15
   .byte    $73
   .byte    $48
   .byte    $15
   .byte    $15
   .byte    $15
   .byte    $7A
   .byte    $15
   .byte    $15
   .byte    $02
   .byte    $15
   .byte    $15
   .byte    $29
   .byte    $15
   .byte    $15
   .byte    $28
   .byte    $15
   .byte    $15
   .byte    $66
   .byte    $15
   .byte    $15
   .byte    $15
   .byte    $5B
   .byte    $72
   .byte    $15
   .byte    $A6
   .byte    $15
   .byte    $15
   .byte    $15
   .byte    $A7
   .byte    $90
   .byte    $35
   .byte    $E3
   .byte    $8F
   .byte    $8F
   .byte    $8F
   .byte    $34
   .byte    $94
   .byte    $A0
   .byte    $A8
   .byte    $AD
   .byte    $B1
   .byte    $BD
   .byte    $C1
   .byte    $CD
   .byte    $E9
   .byte    $EA
   .byte    $EB
   .byte    $78
   .byte    $97
   .byte    $99
   .byte    $D3
   .byte    $DF
   .byte    $EC
   .byte    $D0
   .byte    $4B
   .byte    $8F
   .byte    $8F
   .byte    $8F
   .byte    $0A
   .byte    $8F
   .byte    $AD
   .byte    $AD
   .byte    $8F
   .byte    $F0
   .byte    $9C
   .byte    $8F
   .byte    $25
   .byte    $8F
   .byte    $8F
   .byte    $8F
   .byte    $B2
   .byte    $A4
   .byte    $9C
   .byte    $8F
   .byte    $51
   .byte    $99
   .byte    $8F
   .byte    $8F
   .byte    $ED
   .byte    $8F
   .byte    $8F
   .byte    $8F
   .byte    $8F
   .byte    $D2
   .byte    $8F
   .byte    $8F
   .byte    $8F
   .byte    $CD
   .byte    $B3
   .byte    $66
   .byte    $8F
   .byte    $8F
   .byte    $8F
   .byte    $8F
   .byte    $81
   .byte    $8F
   .byte    $8F
   .byte    $8F
   .byte    $8F
   .byte    $D2
   .byte    $8F
   .byte    $B8
   .byte    $8F
   .byte    $05
   .byte    $CA
   .byte    $C7
   .byte    $8F
   .byte    $8F
   .byte    $8F
   .byte    $EC
   .byte    $8F
   .byte    $8F
   .byte    $75
   .byte    $8F
   .byte    $8F
   .byte    $41
   .byte    $8F
   .byte    $8F
   .byte    $57
   .byte    $8F
   .byte    $8F
   .byte    $98
   .byte    $D7
   .byte    $8F
   .byte    $8F
   .byte    $E3
   .byte    $DB
   .byte    $8F
   .byte    $8F
   .byte    $C5
   .byte    $90
   .byte    $8F
   .byte    $8F
   .byte    $B6
   .byte    $8F
   .byte    $8F
   .byte    $8F
   .byte    $8F
   .byte    $E6
   .byte    $8F
   .byte    $47
   .byte    $8F
   .byte    $8F
   .byte    $95
   .byte    $EE
   .byte    $06
   .byte    $5C
   .byte    $0F
   .byte    $35
   .byte    $2D
   .byte    $2B
   .byte    $7C
   .byte    $3A
   .byte    $FE
   .byte    $2A
   .byte    $2F
   .byte    $25
   .byte    $21
   .byte    $3F
   .byte    $26
   .byte    $FE
   .byte    $29
   .byte    $FF
   .byte    $3D
   .byte    $FF
   .byte    $21
   .byte    $3F
   .byte    $24
   .byte    $FF
   .byte    $3D
   .byte    $21
   .byte    $3F
   .byte    $FF
   .byte    $27
   .byte    $22
   .byte    $FE
   .byte    $B7
   .byte    $9A
   .byte    $D3
   .byte    $EF
   .byte    $EF
   .byte    $13
   .byte    $5E
   .byte    $70
   .byte    $B3
   .byte    $9C
   .byte    $7B
   .byte    $7B
   .byte    $78
   .byte    $78
   .byte    $78
   .byte    $78
   .byte    $EE
   .byte    $06
   .byte    $5C
   .byte    $5C
   .byte    $E5
   .byte    $75
   .byte    $7B
   .byte    $7B
   .byte    $6F
   .byte    $7A
   .byte    $C7
   .byte    $C7
   .byte    $C7
   .byte    $C7
   .byte    $C7
   .byte    $C8
   .byte    $C8
   .byte    $C8
   .byte    $C8
   .byte    $C8
   .byte    $C8
   .byte    $C8
   .byte    $C2
   .byte    $C2
   .byte    $C2
   .byte    $C2
   .byte    $C3
   .byte    $C4
   .byte    $CD
   .byte    $CD
   .byte    $C3
   .byte    $CD
   .byte    $CD
   .byte    $CD
   .byte    $C3
   .byte    $C3
TokenComma:
   jsr      $CF3E
   sty      $0F
   ldx      #$ED
TokenCheck:
   ldy      $03
   dey
   iny
   lda      ($05),y
   cmp      #$20
   beq      $C236
   sty      $5E
   sta      $52
   inx
   lda      $BFFF,x
   bmi      $C26B
   cmp      $52
   bne      $C241
   lda      $C0EE,x
   tax
   inx
   iny
   lda      $BFFF,x
   bmi      $C26B
   cmp      ($05),y
   beq      $C24F
   lda      ($05),y
   cmp      #$2E
   beq      Dotted
   ldy      $5E
   bpl      $C24B
Dotted:
   inx
   lda      $BFFF,x
   bpl      Dotted
   iny
   cmp      #$FE
   bcs      $C2AA
   sta      $53
   lda      $C0EE,x
   bcc      $C29F
   ldx      $04
dummyroutine:
   rts
   ldx      #$0E
   ldy      $03
   dey
   iny
   lda      ($05),y
   cmp      #$20
   beq      $C27E
   cmp      $C1DD,x
   beq      $C296
   sta      $52
   inx
   lda      $C1DD,x
   bmi      $C2A8
   cmp      $52
   bne      $C28C
   lda      $C212,x
   sta      $53
   lda      $C1F8,x
   iny
   sta      $52
   sty      $03
   ldx      $04
   jmp      ($0052)
   cmp      #$FE
   beq      $C276
errorroutine:
   brk
NewCommand:
   jsr      $C4E4
   bne      $C2B6
   lda      #$29
   sta      $12
   lda      #$0D
   ldy      $12
   sty      $0E
   ldy      #$00
   sty      $0D
   sta      ($0D),y
   lda      #$FF
   iny
   sta      ($0D),y
   iny
   sty      $0D
   lda      #$08
   sta      $0321
   lda      #$3E
   cld
   jsr      $CD0F
   ldx      #$01
   stx      $06
   dex
   stx      $05
   stx      $01
   stx      $02
   lda      #$D8
   sta      BRKVEC
   lda      #$C9
   sta      $0203
   lda      #$E7
   sta      $10
   lda      #$C9
   sta      $11
BreakCommand:
   ldx      #$FF
   txs
   lda      #$00
   sta      $04
   sta      $03
   sta      $15
   sta      $13
   sta      $14
   ldx      #$34
   sta      $038C,x
   dex
   bne      $C303
TokenStmt:
   jsr      Get2Digit
   bcs      $C32F
   jsr      $C46A
   bcc      $C316
   jmp      $CDC9
   ldx      #$7D
   jmp      TokenCheck
TokenStmtB:
   jsr      Get2Digit
   bcs      $C32F
   ldx      #$7F
   jmp      TokenCheck
TokenStmtC:
   jsr      Get2Digit
   bcs      $C32F
   ldx      #$10
   jmp      $C27B
   ldx      #$14
   jmp      $C27B
   sec
   ror      $0F
   jsr      $C372
   ldx      #$2E
   jmp      TokenCheck
   jsr      $C78B
   jsr      $C3CB
   lda      $0F
   bmi      $C36A
   ldx      #$00
   stx      $27
   ldy      #$00
   lda      $0052,y
   pha
   and      #$0F
   sta      $45,x
   pla
   lsr      a
   lsr      a
   lsr      a
   lsr      a
   inx
   sta      $45,x
   inx
   iny
   cpy      #$04
   bcc      $C34F
   jsr      $C5C8
   bmi      $C337
   jsr      $C589
   bmi      $C337
   jsr      $CD54
   ldx      #$18
   jmp      $C27B
   jsr      PromptWrite
   lda      ($05),y
   iny
   cmp      #$0D
   beq      $C39D
   sty      $03
   cmp      #$22
   bne      $C377
   lda      ($05),y
   cmp      #$22
   bne      $C372
   iny
   bcs      $C377
   jsr      $C78B
   jsr      $C3CB
   ora      $54
   ora      $53
   beq      $C3AA
   ldy      #$00
   lda      ($52),y
   cmp      #$0D
   beq      $C337
   jsr      PromptWrite
   iny
   bne      $C39E
   lda      $52
   jsr      PromptWrite
   jmp      $C337
LinkCommand:
   jsr      $C3C8
   jsr      $C4E4
   lda      $0322
   ldx      $0339
   ldy      $033A
   jsr      $C2A5
   cld
   jmp      BasicEntryB
   jsr      CheckPlusMin
   ldy      #$52
   dex
   stx      $04
   lda      $16,x
   sta      $0000,y
   lda      $25,x
   sta      $0001,y
   lda      $34,x
   sta      $0002,y
   lda      $43,x
   sta      $0003,y
   rts
   jsr      $C4E1
   jsr      $CA2F
   jmp      BasicEntryB
PokeCommand:
   jsr      CheckPlusMin
   jsr      $CE93
   lda      $26,x
   iny
   sta      ($52),y
   iny
   lda      $35,x
   sta      ($52),y
   iny
   lda      $44,x
   sta      ($52),y
   jmp      BasicEntryB
PeekCommand:
   jsr      CheckPlusMin
   jsr      $CE93
   jmp      BasicEntryB
DoOsCommand:
   ldx      #$00
   lda      ($05),y
   sta      $0100,x
   sty      $03
   iny
   inx
   cmp      #$0D
   bne      $C411
   jsr      OSCLI
   jmp      BasicEntryA
CheckExtent:
   lda      ExtentionRom
   cmp      #$AA
   bne      $C463
   lsr      a
   cmp      $D001
   bne      $C463
   ldy      $5E
   rts
Get2Digit:
   ldy      $03
   bpl      $C43B
spaceDelA:
   iny
   sty      $03
   lda      ($05),y
   cmp      #$20
   beq      spaceDelA
   cmp      #$5B
   bcs      $C463
   sbc      #$3F
   bcc      $C464
   ldx      $04
   sta      $16,x
   iny
   lda      ($05),y
   cmp      #$2E
   beq      $C463
   cmp      #$5B
   bcs      $C45C
   cmp      #$40
   bcs      $C463
   inx
   stx      $04
   sec
   sty      $03
   rts
   clc
   rts
   jsr      Get2Digit
   bcs      $C425
   ldx      #$00
   ldy      $03
   stx      $52
   stx      $53
   stx      $54
   stx      $55
   dey
   iny
   lda      ($05),y
   sec
   sbc      #$30
   bmi      $C4D3
   cmp      #$0A
   bcs      $C4D3
   ldx      $53
   pha
   lda      $55
   pha
   lda      $54
   pha
   lda      $52
   asl      a
   rol      $53
   rol      $54
   rol      $55
   bmi      $C46B
   asl      a
   rol      $53
   rol      $54
   rol      $55
   bmi      $C46B
   adc      $52
   sta      $52
   txa
   adc      $53
   sta      $53
   pla
   adc      $54
   sta      $54
   pla
   adc      $55
   asl      $52
   rol      $53
   rol      $54
   rol      a
   bmi      $C46B
   sta      $55
   pla
   adc      $52
   sta      $52
   bcc      $C4CF
   inc      $53
   bne      $C4CF
   inc      $54
   bne      $C4CF
   inc      $55
   bmi      $C46B
   ldx      #$FF
   bne      $C477
   txa
   beq      $C463
   sec
   sty      $03
   ldy      #$52
   jmp      $C99F
   jsr      $C279
   jsr      $C78B
   ldy      $03
   dey
spaceDelB:
   iny
   lda      ($05),y
   cmp      #$20
   beq      spaceDelB
   cmp      #$3B
   beq      $C4F6
   cmp      #$0D
   bne      $C55C
   clc
   tya
   adc      $05
   sta      $05
   bcc      $C500
   inc      $06
   ldy      #$01
   sty      $03
   lda      Pia_B
   and      #$20
   beq      $C547
   rts
   jsr      $C4E4
   dey
   lda      ($05),y
   cmp      #$3B
   beq      $C50B
   lda      $06
   cmp      #$01
   beq      $C596
   iny
   lda      ($05),y
   bmi      $C55C
   sta      $02
   iny
   lda      ($05),y
   sta      $01
   iny
   lda      ($05),y
   dey
   cmp      #$61
   bcc      $C4F7
   sbc      #$61
   cmp      #$1B
   bcs      $C4F6
   iny
   asl      a
   tax
   jsr      $C4F6
   lda      $05
   sta      $038D,x
   lda      $06
   sta      $038E,x
   rts
   jmp      $C2CF
   dey
   jsr      $C4F6
   bne      BasicEntryB
   jsr      CheckExtent
   bcc      BasicEntryA
   jmp      (ExtentEntryAddr)
BasicEntryA:
   jsr      $C4E4
BasicEntryB:
   ldy      #$00
   lda      ($05),y
   cmp      #$3B
   bne      $C57D
   jmp      TokenStmtB
   jsr      TokenLog
   dex
   stx      $04
   lda      $16,x
   beq      $C575
   ldx      #$20
   jmp      TokenCheck
   lda      #$0D
   dey
   iny
   cmp      ($05),y
   bne      $C578
   lda      $06
   cmp      #$01
   beq      $C547
   jsr      $C51C
   jmp      TokenStmtB
   lda      $43
   sta      $27
   bpl      $C593
   inx
   jsr      $C8C4
   ldx      #$09
   lda      #$00
   sta      $45,x
   sec
   lda      $16
   sbc      TableMask,x
   pha
   lda      $25
   sbc      $C610,x
   pha
   lda      $34
   sbc      $C61A,x
   tay
   lda      $43
   sbc      $C624,x
   bcc      $C5C1
   sta      $43
   sty      $34
   pla
   sta      $25
   pla
   sta      $16
   inc      $45,x
   bne      $C599
   pla
   pla
   dex
   bpl      $C595
   ldx      #$0A
   dex
   beq      $C5CF
   lda      $45,x
   beq      $C5C8
   stx      $52
   bit      $27
   bpl      $C5D7
   inc      $52
   sec
   lda      $0321
   beq      $C5DF
   sbc      #$01
   sbc      $52
   beq      $C5EE
   bcc      $C5EE
   tay
   lda      #$20
   jsr      PromptWrite
   dey
   bne      $C5E6
   bit      $27
   bpl      $C5F7
   lda      #$2D
   jsr      PromptWrite
   lda      $45,x
   cmp      #$0A
   bcc      $C5FF
   adc      #$06
   adc      #$30
   jsr      PromptWrite
   dex
   bpl      $C5F7
   rts
TableMask:
   .byte    $01
   .byte    $0A
   .byte    $64
   .byte    $E8
   .byte    $10
   .byte    $A0
   .byte    $40
   .byte    $80
   .byte    $00
   .byte    $00
   .byte    $00
   .byte    $03
   .byte    $27
   .byte    $86
   .byte    $42
   .byte    $96
   .byte    $E1
   .byte    $CA
   .byte    $00
   .byte    $00
   .byte    $00
   .byte    $00
   .byte    $00
   .byte    $01
   .byte    $0F
   .byte    $98
   .byte    $F5
   .byte    $9A
   .byte    $00
   .byte    $00
   .byte    $00
   .byte    $00
   .byte    $00
   .byte    $00
   .byte    $00
   .byte    $00
   .byte    $05
   .byte    $3B
   dec      $04
   ldx      $04
   ldy      #$00
   sty      $58
   lda      $12
   sta      $59
   dey
   lda      #$0D
   iny
   cmp      ($58),y
   bne      $C63D
   jsr      $CEA1
   lda      ($58),y
   iny
   cmp      $25,x
   bcc      $C63B
   bne      $C660
   lda      ($58),y
   cmp      $16,x
   bcc      $C63B
   bne      $C660
   sta      $01
   lda      $25,x
   sta      $02
   jsr      $CEA1
   clc
   rts
   jsr      CheckPlusMin
   lda      $42,x
   eor      $41,x
   sta      $52
   jsr      $C905
   ldy      #$53
   jsr      $C3CD
   lda      $42,x
   sta      $43,x
   jsr      $C907
   ldy      #$57
   jsr      $C3CD
   ldy      #$00
   sty      $5B
   sty      $5C
   sty      $5D
   sty      $5E
   rts
   jsr      $C661
   lda      $54
   jsr      $C705
   beq      $C67F
   ldy      #$20
   dey
   beq      $C6D9
   asl      $57
   rol      $58
   rol      $59
   rol      $5A
   bpl      $C695
   rol      $57
   rol      $58
   rol      $59
   rol      $5A
   rol      $5B
   rol      $5C
   rol      $5D
   rol      $5E
   sec
   lda      $5B
   sbc      $53
   pha
   lda      $5C
   sbc      $54
   pha
   lda      $5D
   sbc      $55
   tax
   lda      $5E
   sbc      $56
   bcc      $C6D4
   sta      $5E
   stx      $5D
   pla
   sta      $5C
   pla
   sta      $5B
   bcs      $C6D6
   pla
   pla
   dey
   bne      $C6A2
   rts
   jsr      $C78B
   dex
   stx      $04
   lda      $42,x
   eor      #$80
   sta      $52
   lda      $43,x
   eor      #$80
   sta      $54
   ldy      #$00
   sec
   lda      $15,x
   sbc      $16,x
   sta      $53
   lda      $24,x
   sbc      $25,x
   sta      $55
   lda      $33,x
   sbc      $34,x
   sta      $56
   lda      $52
   sbc      $54
   ora      $53
   ora      $55
   ora      $56
   rts
TokenLog:
   jsr      TokenDollar
   ldx      #$43
   jmp      TokenCheck
   jsr      TokenDollar
   lda      $14,x
   and      $15,x
   sta      $14,x
   dec      $04
   jmp      $C70F
   jsr      TokenDollar
   lda      $14,x
   ora      $15,x
   jmp      $C71B
TokenDollar:
   ldx      #$46
   jmp      TokenCheck
   jsr      $C78B
   jsr      $CEAE
   lda      $15,x
   sta      $54
   lda      $24,x
   sta      $55
   ldy      #$FF
   iny
   lda      ($54),y
   cmp      ($52),y
   bne      $C74F
   eor      #$0D
   bne      $C741
   tay
   beq      $C760
   ldy      #$00
   beq      $C761
   jsr      $C78B
TokenArthm:
   ldx      #$00
   jmp      TokenCheck
   jsr      $C6DA
   bne      $C761
   iny
   sty      $15,x
   rts
   jsr      $C6DA
   beq      $C760
   bcc      $C760
   bcs      $C761
   jsr      $C6DA
   bne      $C760
   beq      $C761
   jsr      $C6DA
   bcc      $C760
   bcs      $C761
   jsr      $C6DA
   bcs      $C760
   bcc      $C761
   jsr      $C6DA
   beq      $C761
   bcs      $C760
   bcc      $C761
   jsr      $C80B
   jmp      $C795
   sta      $41,x
   dec      $04
   ldx      #$00
   jmp      $C27B
   jsr      $C80B
   clc
   lda      $14,x
   adc      $15,x
   sta      $14,x
   lda      $23,x
   adc      $24,x
   sta      $23,x
   lda      $32,x
   adc      $33,x
   sta      $32,x
   lda      $41,x
   adc      $42,x
   jmp      $C791
   jsr      $C80B
   lda      $14,x
   sbc      $15,x
   sta      $14,x
   lda      $23,x
   sbc      $24,x
   sta      $23,x
   lda      $32,x
   sbc      $33,x
   sta      $32,x
   lda      $41,x
   sbc      $42,x
   jmp      $C791
   jsr      $C80B
   lda      $14,x
   ora      $15,x
   sta      $14,x
   lda      $23,x
   ora      $24,x
   sta      $23,x
   lda      $32,x
   ora      $33,x
   sta      $32,x
   lda      $41,x
   ora      $42,x
   jmp      $C791
   jsr      $C80B
   lda      $14,x
   eor      $15,x
   sta      $14,x
   lda      $23,x
   eor      $24,x
   sta      $23,x
   lda      $32,x
   eor      $33,x
   sta      $32,x
   lda      $41,x
   eor      $42,x
   jmp      $C791
   jsr      CheckPlusMin
   ldx      #$05
   jmp      $C27B
   jsr      $C661
   lsr      $5A
   ror      $59
   ror      $58
   ror      $57
   bcc      $C839
   clc
   tya
   adc      $53
   tay
   lda      $5C
   adc      $54
   sta      $5C
   lda      $5D
   adc      $55
   sta      $5D
   lda      $5E
   adc      $56
   and      #$7F
   sta      $5E
   asl      $53
   rol      $54
   rol      $55
   rol      $56
   lda      $57
   ora      $58
   ora      $59
   ora      $5A
   bne      $C816
   sty      $5B
   lda      $52
   php
   ldy      #$5B
   jsr      $C99F
   plp
   bpl      $C85B
   jsr      $C8C4
   jmp      $C80E
   jsr      $C689
   rol      $57
   rol      $58
   rol      $59
   rol      $5A
   bit      $52
   php
   ldy      #$57
   bne      $C852
   jsr      $C689
   ldx      $04
   lda      $44,x
   php
   jmp      $C850
   jsr      CheckPlusMin
   dex
   stx      $04
   lda      $15,x
   and      $16,x
   sta      $15,x
   lda      $24,x
   and      $25,x
   sta      $24,x
   lda      $33,x
   and      $34,x
   sta      $33,x
   lda      $42,x
   and      $43,x
   sta      $42,x
   jmp      $C80E
   jsr      $C8A2
   jmp      $C80E
   jsr      CheckPlusMin
   clc
   lda      $15,x
   adc      $14,x
   tay
   lda      $24,x
   adc      $23,x
   dex
   jmp      $C953
   jsr      $C8A2
   jsr      $C962
   jmp      $C80E
CheckPlusMin:
   ldx      #$04
   jmp      TokenCheck
   jsr      $C8DC
   sec
   lda      #$00
   tay
   sbc      $15,x
   sta      $15,x
   tya
   sbc      $24,x
   sta      $24,x
   tya
   sbc      $33,x
   sta      $33,x
   tya
   sbc      $42,x
   sta      $42,x
   rts
   jsr      Get2Digit
   bcc      $C8F8
   ldy      $15,x
   lda      $0321,y
   sta      $15,x
   lda      $0357,y
   sta      $33,x
   lda      $033C,y
   sta      $24,x
   lda      $0372,y
   sta      $42,x
   rts
   jsr      $C46A
   bcs      $C8F7
   ldx      #$07
   jmp      TokenCheck
   jsr      CheckPlusMin
   lda      $42,x
   bmi      $C8C4
   rts
HashSign:
   ldx      #$00
   stx      $52
   stx      $53
   stx      $54
   stx      $55
   dey
   iny
   lda      ($05),y
   cmp      #$30
   bcc      $C93E
   cmp      #$3A
   bcc      $C92A
   sbc      #$37
   cmp      #$0A
   bcc      $C93E
   cmp      #$10
   bcs      $C93E
   asl      a
   asl      a
   asl      a
   asl      a
   ldx      #$03
   asl      a
   rol      $52
   rol      $53
   rol      $54
   rol      $55
   dex
   bpl      $C930
   bmi      $C915
   txa
   bpl      $C959
   jmp      $C4D6
   jsr      TokenLog
   ldx      #$0C
   jmp      $C27B
QuestionSign:
   jsr      CheckPlusMin
   ldy      $15,x
   lda      $24,x
   sta      $53
   sty      $52
   dex
   ldy      #$00
   lda      ($52),y
   jmp      $C97C
ExclaSign:
   jsr      QuestionSign
   ldy      #$01
   lda      ($52),y
   sta      $24,x
   iny
   lda      ($52),y
   sta      $33,x
   iny
   lda      ($52),y
   sta      $42,x
   rts
   ldy      #$0D
   jsr      $C9A1
   beq      $C981
CountCommand:
   lda      $07
   jsr      $C9B3
   sta      $24,x
   sta      $33,x
   sta      $42,x
   rts
RndCommand:
   ldy      #$20
   lda      $0A
   lsr      a
   lsr      a
   lsr      a
   eor      $0C
   ror      a
   rol      $08
   rol      $09
   rol      $0A
   rol      $0B
   rol      $0C
   dey
   bne      $C988
   ldy      #$08
   ldx      $04
   lda      $0001,y
   sta      $25,x
   lda      $0002,y
   sta      $34,x
   lda      $0003,y
   sta      $43,x
   lda      $0000,y
   sta      $16,x
   inx
   stx      $04
   ldy      $03
   lda      #$00
   rts
   jsr      CheckPlusMin
   jsr      $C3CB
   ldy      #$00
   lda      #$0D
   cmp      ($52),y
   beq      $C9CE
   iny
   bne      $C9C7
   tya
   jmp      $C97C
   jsr      $CEB1
   jmp      $C958
breakroutine:
   pla
   pla
   sta      $00
   lda      $10
   sta      $05
   lda      $11
   sta      $06
   jmp      BreakCommand
   .string  '@=1;P.$6$7'"ERROR "?0;@=8;IF?1|?2P." LINE"!1& #FFFF\x0d\x00\x00P.';E.\x0d'
   jsr      CheckExtent
   bcc      $CA1B
   jmp      (ExtentValExpr)
   jsr      $C78B
   ldx      $04
   dex
   dex
   stx      $04
   ldy      $16,x
   lda      $17,x
   sta      $0321,y
   lda      $26,x
   sta      $033C,y
   lda      $35,x
   sta      $0357,y
   lda      $44,x
   sta      $0372,y
   rts
PromptWrite:
   inc      $07
   jmp      (WRCVEC)
ListCommand:
   lda      #$00
   jsr      $C97C
   lda      #$FF
   jsr      $C97C
   sta      $04
   ldy      #$7F
   sty      $26
   jsr      $C465
   bcc      $CAB8
   jsr      $C231
   bcs      $CAC3
   jsr      $C465
   ldx      #$01
   stx      $04
   jsr      $C4E4
   jsr      $C62E
   bcc      $CAAA
   dey
   bcs      $CA9E
   lda      #$05
   sta      $0321
   jsr      $C589
   lda      #$08
   sta      $0321
   ldy      $03
   lda      ($58),y
   cmp      #$0D
   beq      $CA98
   jsr      PromptWrite
   iny
   bne      $CA8C
   jsr      $CD54
   jsr      $CEA1
   lda      ($58),y
   sta      $25
   iny
   lda      ($58),y
   sta      $16
   iny
   sty      $03
   lda      $16
   clc
   sbc      $17
   lda      $25
   sbc      $26
   bcc      $CA7D
   jmp      $C2CF
   jsr      $C231
   inc      $04
   jsr      $C465
   jmp      $CA6E
   lda      $16
   ldy      $25
   sta      $17
   sty      $26
   bcs      $CA6E
NextCommand:
   jsr      Get2Digit
   ldy      $15
   beq      $CAE4
   bcc      $CAE5
   dec      $04
   lda      $15,x
   cmp      $023F,y
   beq      $CAE5
   dey
   sty      $15
   bne      $CADA
   brk
   ldx      $023F,y
   clc
   lda      $0321,x
   adc      $024A,y
   sta      $0321,x
   sta      $52
   lda      $033C,x
   adc      $0255,y
   sta      $033C,x
   sta      $53
   lda      $0357,x
   adc      $0260,y
   sta      $0357,x
   sta      $54
   lda      $0372,x
   adc      $026B,y
   sta      $0372,x
   tax
   lda      $52
   sec
   sbc      $0276,y
   sta      $52
   lda      $53
   sbc      $0281,y
   sta      $53
   lda      $54
   sbc      $028C,y
   sta      $54
   txa
   sbc      $0297,y
   ora      $52
   ora      $53
   ora      $54
   beq      $CB45
   txa
   eor      $026B,y
   eor      $0297,y
   bpl      $CB43
   bcs      $CB45
   bcc      $CB52
   bcs      $CB52
   lda      $02A2,y
   sta      $05
   lda      $02AD,y
   sta      $06
   jmp      $CBFF
   dec      $15
   jmp      BasicEntryA
ForCommand:
   jsr      Get2Digit
   bcc      $CB6D
   jsr      $C279
   jsr      $CA2C
   tya
   ldy      $15
   cpy      #$0B
   bcs      $CB6D
   sta      $0240,y
   lda      #$00
   sta      $026C,y
   sta      $0261,y
   sta      $0256,y
   lda      #$01
   sta      $024B,y
   ldx      #$16
   jmp      TokenCheck
ToCommand:
   jsr      $C78B
   ldy      $15
   dex
   stx      $04
   lda      $16,x
   sta      $0277,y
   lda      $25,x
   sta      $0282,y
   lda      $34,x
   sta      $028D,y
   lda      $43,x
   sta      $0298,y
   ldx      #$1A
   jmp      TokenCheck
   jsr      $C78B
StepCommand:
   ldy      $15
   dex
   stx      $04
   lda      $16,x
   sta      $024B,y
   lda      $25,x
   sta      $0256,y
   lda      $34,x
   sta      $0261,y
   lda      $43,x
   sta      $026C,y
   jsr      $C50C
   ldy      $15
   lda      $05
   sta      $02A3,y
   lda      $06
   sta      $02AE,y
   inc      $15
   jmp      TokenStmtB
GosubCommand:
   jsr      $CC1F
   jsr      $C50C
   ldy      $14
   cpy      #$0E
   bcs      $CC00
   lda      $05
   sta      $02CF,y
   lda      $06
   sta      $02DD,y
   inc      $14
   bcc      $CC0B
ReturnCommand:
   jsr      $C4E4
   ldy      $14
   beq      $CC1D
   dec      $14
   lda      $02CE,y
   sta      $05
   lda      $02DC,y
   sta      $06
   jsr      $C500
   jmp      TokenStmtB
GotoCommand:
   jsr      $CC1F
   jsr      $C4E4
   lda      $57
   bne      $CC14
   jsr      $C62E
   bcs      $CC7D
   ldy      $58
   lda      $59
   sty      $05
   jmp      $CBFD
   brk
spaceDelC:
   iny
   lda      ($05),y
   cmp      #$20
   beq      spaceDelC
   cmp      #$61
   bcc      $CC79
   sta      $57
   sbc      #$61
   cmp      #$1B
   bcs      $CC79
   asl      a
   tax
   lda      $038D,x
   sta      $58
   jsr      $C4F6
   lda      $038E,x
   sta      $59
   ora      $58
   bne      $CC78
   tay
   lda      $12
   sta      $59
   dey
   lda      #$0D
   iny
   cmp      ($58),y
   bne      $CC4C
   iny
   lda      ($58),y
   bmi      $CC9B
   sta      $02
   iny
   lda      ($58),y
   sta      $01
   iny
   lda      ($58),y
   dey
   cmp      $57
   beq      $CC6B
   jsr      $CEA1
   jmp      $CC4A
   jsr      $CEA2
   lda      $58
   sta      $038D,x
   lda      $59
   sta      $038E,x
   rts
   jsr      CheckPlusMin
   lda      #$00
   sta      $57
   rts
InputCommand:
   jsr      $C372
   jsr      Get2Digit
   bcs      $CC8E
   ldx      #$2B
   jmp      TokenCheck
   jsr      $CD09
   lda      $05
   pha
   lda      $06
   pha
   lda      $03
   pha
   ldy      #$00
   sty      $03
   iny
   sty      $06
   ldy      #$40
   sty      $05
   jsr      $CA2C
   pla
   sta      $03
   pla
   sta      $06
   pla
   sta      $05
   ldx      #$2C
   jmp      TokenCheck
   jsr      $C78B
   ldy      #$54
   jsr      $C3CD
   jsr      $CD09
   ldx      #$40
   ldy      #$00
   lda      $0100,x
   sta      ($54),y
   cmp      #$0D
   beq      InputCommand
   inx
   iny
   bne      $CCC5
UntilCommand:
   jsr      TokenLog
   ldy      $13
   beq      $CCC4
   dex
   stx      $04
   lda      $16,x
   beq      $CCE5
   dec      $13
   jmp      BasicEntryA
   lda      $02B8,y
   sta      $05
   lda      $02C3,y
   jmp      $CBFD
DoCommand:
   ldx      $13
   cpx      #$0B
   bcs      $CD10
   dey
   jsr      $C4F6
   lda      $05
   sta      $02B9,x
   lda      $06
   sta      $02C4,x
   inc      $13
   jmp      TokenStmtB
   lda      #$3F
   ldy      #$40
   bne      $CD11
   ldy      #$00
   jsr      PromptWrite
Inputlinebuffer:
   sty      $52
   ldy      $52
   jsr      OSECHO
   cmp      #$7F
   bne      $CD26
   dey
   cpy      $52
   bpl      $CD18
   bmi      $CD16
   cmp      #$18
   bne      $CD30
   jsr      $CD54
   jmp      $CD16
   cmp      #$1B
   bne      $CD37
   jmp      $C2CF
   sta      $0100,y
   cmp      #$0D
   beq      $CD57
   iny
   tya
   sec
   sbc      $52
   cmp      #$40
   bcc      $CD18
   jsr      OSRDCH
   cmp      #$7F
   bne      $CD47
   jsr      OSWRCH
   jmp      $CD1F
   jsr      OSCRLF
   lda      #$00
   sta      $07
   rts
   jsr      $C78B
   jsr      $CEAE
   ldy      #$54
   jsr      $C3CD
   ldy      #$FF
   iny
   lda      ($52),y
   sta      ($54),y
   cmp      #$0D
   bne      $CD69
   jmp      BasicEntryA
   jsr      $CD81
   jmp      $C3F1
   jsr      $CD81
   jmp      $C409
   jsr      $C8E1
   jsr      CheckPlusMin
   dex
   clc
   lda      $16,x
   adc      $15,x
   sta      $15,x
   lda      $25,x
   adc      $24,x
   sta      $24,x
   stx      $04
   rts
   jsr      $C4E4
   lda      $12
   sta      $0E
   ldy      #$00
   sty      $0D
   dey
   iny
   lda      ($0D),y
   cmp      #$0D
   bne      $CDA4
   jsr      $CDBC
   lda      ($0D),y
   bmi      $CDB5
   iny
   bne      $CDA4
   iny
   jsr      $CDBC
   jmp      $C2CF
   clc
   tya
   adc      $0D
   sta      $0D
   bcc      $CDC6
   inc      $0E
   ldy      #$01
   rts
   sty      $56
   jsr      $C62E
   bcs      $CE18
   lda      $58
   sta      $52
   sbc      #$01
   sta      $58
   sta      $0D
   lda      $59
   sta      $53
   sbc      #$00
   sta      $0E
   sta      $59
   lda      #$0D
   iny
   cmp      ($52),y
   bne      $CDE6
   clc
   tya
   adc      $52
   sta      $52
   bcc      $CDF5
   inc      $53
   ldy      #$00
   lda      ($52),y
   sta      ($0D),y
   cmp      #$0D
   beq      $CE08
   iny
   bne      $CDF7
   inc      $53
   inc      $0E
   bne      $CDF7
   iny
   bne      $CE0F
   inc      $53
   inc      $0E
   lda      ($52),y
   sta      ($0D),y
   bpl      $CDFF
   jsr      $CDBD
   ldy      #$01
   sty      $57
   dey
   lda      #$0D
   cmp      ($56),y
   beq      $CE80
   iny
   cmp      ($56),y
   bne      $CE23
   iny
   iny
   lda      $0D
   sta      $54
   lda      $0E
   sta      $55
   jsr      $CDBD
   sta      $52
   lda      $0E
   sta      $53
   dey
   lda      #$55
   sta      ($0D),y
   cmp      ($0D),y
   bne      $CDF6
   asl      a
   sta      ($0D),y
   cmp      ($0D),y
   bne      $CDF6
   lda      ($54),y
   sta      ($52),y
   tya
   bne      $CE56
   dec      $55
   dec      $53
   dey
   tya
   adc      $54
   ldx      $55
   bcc      $CE5F
   inx
   cmp      $58
   txa
   sbc      $59
   bcs      $CE4B
   ldy      #$01
   lda      $25
   sta      ($58),y
   iny
   lda      $16
   sta      ($58),y
   sec
   jsr      $CEA2
   ldy      #$FF
   iny
   lda      ($56),y
   sta      ($58),y
   cmp      #$0D
   bne      $CE77
   jmp      $C2CF
   jsr      $C4E4
   ldy      #$00
   sty      $05
   sty      $03
   lda      $12
   sta      $06
   jmp      BasicEntryB
   jsr      $C4DE
   dex
   jsr      $C3CB
   ldy      #$00
   lda      $17,x
   sta      ($52),y
   rts
   clc
   tya
   adc      $58
   sta      $58
   bcc      $CEAB
   inc      $59
   jmp      $C500
   jsr      $C279
   ldx      #$26
   jmp      TokenCheck
DollarVal:
   jsr      $C78B
   jsr      $C3CB
   ldy      $03
   rts
QuotedString:
   jsr      $C4F6
   sty      $53
   dey
   ldx      #$00
   lda      ($05),y
   cmp      #$0D
   beq      $CEC6
   sta      $0140,x
   inx
   iny
   cmp      #$22
   bne      $CEC7
   lda      ($05),y
   cmp      #$22
   beq      $CEEA
   lda      #$0D
   sta      $013F,x
   sty      $03
   lda      #$40
   sta      $52
   ldx      $04
   rts
   iny
   bcs      $CEC7
LoadCommand:
   jsr      $CEFA
   dey
   sty      $56
   sec
   jsr      $FFE0
   jmp      $CD9B
   jsr      $CEB1
   jsr      $C4E4
   dey
   sty      $54
   lda      $12
   sta      $55
   ldx      #$52
   rts
SaveCommand:
   jsr      $CEFA
   sty      $58
   sta      $59
   lda      $0D
   sta      $5A
   lda      $0E
   sta      $5B
   lda      #$B2
   sta      $56
   lda      #$C2
   sta      $57
   clc
   jsr      OSSAVE
   jmp      BasicEntryB
   sec
   lda      #$00
   rol      a
   pha
   jsr      $CF3E
   ldx      #$52
   pla
   jsr      OSRDAR
   ldy      #$52
   jsr      $C99F
   sta      $42,x
   rts
   jsr      CheckPlusMin
   ldy      $15,x
   dex
   stx      $04
   rts
PtrCommand:
   jsr      CheckPlusMin
   jsr      $C4DE
   jsr      $C3CB
   jsr      $CF41
   ldx      #$52
   jsr      OSSTAR
   jmp      BasicEntryB
BgetCommand:
   jsr      $CF3E
   sty      $52
   jsr      OSBGET
   jmp      $C97C
GetCommand:
   jsr      BgetCommand
   ldy      $52
   jsr      OSBGET
   sta      $24,x
   jsr      OSBGET
   sta      $33,x
   jsr      OSBGET
   sta      $42,x
   rts
   jsr      CheckPlusMin
   jsr      $C231
   jsr      $C4E1
   jsr      $C3CB
   jsr      $CF41
   lda      $52
   jmp      (BPTVEC)
BputCommand:
   jsr      $CF7B
   jmp      BasicEntryB
PutCommand:
   jsr      $CF7B
   ldx      #$01
   lda      $52,x
   jsr      OSBPUT
   inx
   cpx      #$04
   bcc      $CF9A
   bcs      $CF92
FINCommand:
   sec
   php
   jsr      $CEB1
   ldx      #$52
   plp
   jsr      OSFIND
   ldx      $04
   jmp      $C97C
ShutCommand:
   jsr      CheckPlusMin
   jsr      $C4E4
   jsr      $CF41
   jsr      OSSHUT
   jmp      BasicEntryB
SputCommand:
   jsr      TokenComma
   jsr      $CEB1
   jsr      $C4E4
   dey
   lda      ($52),y
   sty      $55
   ldy      $0F
   pha
   jsr      OSBPUT
   pla
   cmp      #$0D
   beq      $CFC2
   ldy      $55
   iny
   bne      $CFCF
SgetCommand:
   jsr      TokenComma
   jsr      $C4E1
   jsr      $C3CB
   ldy      #$00
   sty      $55
   ldy      $0F
   jsr      OSBGET
   ldy      $55
   sta      ($52),y
   iny
   cmp      #$0D
   bne      $CFEE
   beq      $CFC2
ExtentionRom:

   end
